{
  "swagger": "2.0",
  "info": {
    "title": "plugin.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "Datasource"
    },
    {
      "name": "Controller"
    },
    {
      "name": "PluginAPI"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v2/plugin/add": {
      "post": {
        "summary": "fmtcli: `plugin-add`\nAddPlugin will add a plugin from given information.",
        "operationId": "PluginAPI_AddPlugin",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/fmtrpcPlugin"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/fmtrpcAddPluginRequest"
            }
          }
        ],
        "tags": [
          "PluginAPI"
        ]
      }
    },
    "/v2/plugin/command": {
      "post": {
        "summary": "fmtcli: `plugin-command`\nCommand will send any command to a controller service.",
        "operationId": "PluginAPI_Command",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/fmtrpcFrame"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of fmtrpcFrame"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/fmtrpcControllerPluginRequest"
            }
          }
        ],
        "tags": [
          "PluginAPI"
        ]
      }
    },
    "/v2/plugin/start/record/{name}": {
      "put": {
        "summary": "fmtcli: `plugin-startrecord`\nStartRecording will begin recording data from specified datasource.",
        "operationId": "PluginAPI_StartRecord",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/fmtrpcEmpty"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "name",
            "description": "The name of the plugin we want to interact with",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "PluginAPI"
        ]
      }
    },
    "/v2/plugin/start/{name}": {
      "put": {
        "summary": "fmtcli: `plugin-start`\nStartPlugin will start the specified existing plugin. Plugins added in this way will not be present upon fmtd restart",
        "operationId": "PluginAPI_StartPlugin",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/fmtrpcEmpty"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "name",
            "description": "The name of the plugin we want to interact with",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "PluginAPI"
        ]
      }
    },
    "/v2/plugin/stop/record/{name}": {
      "put": {
        "summary": "fmtcli: `plugin-stoprecord`\nStopRecording will end the recording of data from specified datasource.",
        "operationId": "PluginAPI_StopRecord",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/fmtrpcEmpty"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "name",
            "description": "The name of the plugin we want to interact with",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "PluginAPI"
        ]
      }
    },
    "/v2/plugin/stop/{name}": {
      "put": {
        "summary": "fmtcli: `plugin-stop`\nStopPlugin will stop the specified plugin.",
        "operationId": "PluginAPI_StopPlugin",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/fmtrpcEmpty"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "name",
            "description": "The name of the plugin we want to interact with",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "PluginAPI"
        ]
      }
    },
    "/v2/plugin/subscribe/{name}": {
      "get": {
        "summary": "Subscribe returns a uni-directional stream of data from a specified datasource.",
        "operationId": "PluginAPI_Subscribe",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/fmtrpcFrame"
                },
                "error": {
                  "$ref": "#/definitions/rpcStatus"
                }
              },
              "title": "Stream result of fmtrpcFrame"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "name",
            "description": "The name of the plugin we want to interact with",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "PluginAPI"
        ]
      }
    },
    "/v2/plugins": {
      "get": {
        "summary": "fmtcli: `plugin-list`\nListPlugins will send a list of registered and running plugins.",
        "operationId": "PluginAPI_ListPlugins",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/fmtrpcPluginsList"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "PluginAPI"
        ]
      }
    }
  },
  "definitions": {
    "PluginPluginState": {
      "type": "string",
      "enum": [
        "READY",
        "BUSY",
        "STOPPING",
        "STOPPED",
        "UNKNOWN",
        "UNRESPONSIVE",
        "KILLED"
      ],
      "default": "READY"
    },
    "PluginPluginType": {
      "type": "string",
      "enum": [
        "DATASOURCE",
        "CONTROLLER"
      ],
      "default": "DATASOURCE"
    },
    "fmtrpcAddPluginRequest": {
      "type": "object",
      "properties": {
        "plugin_string": {
          "type": "string",
          "title": "The plugin information string in format unique_name:type(datasource or controller):executable_file_name.ext"
        }
      }
    },
    "fmtrpcControllerPluginRequest": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "the name of the plugin we wish to send the command to"
        },
        "frame": {
          "$ref": "#/definitions/fmtrpcFrame",
          "title": "the data we are sending to the plugin"
        }
      }
    },
    "fmtrpcEmpty": {
      "type": "object"
    },
    "fmtrpcFrame": {
      "type": "object",
      "properties": {
        "source": {
          "type": "string",
          "title": "The name of the source of this Frame"
        },
        "type": {
          "type": "string",
          "title": "A MIME-like type indicating the kind of content within the payload field"
        },
        "timestamp": {
          "type": "string",
          "format": "int64",
          "title": "The UNIX millisecond timestamp of this frame"
        },
        "payload": {
          "type": "string",
          "format": "byte",
          "title": "The actual payload data in bytes. Limit is 2^32"
        }
      }
    },
    "fmtrpcPlugin": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "The name of the plugin"
        },
        "type": {
          "$ref": "#/definitions/PluginPluginType",
          "title": "The plugin type (either Datasource or Controller)"
        },
        "state": {
          "$ref": "#/definitions/PluginPluginState",
          "title": "the current state of the plugin"
        },
        "started_at": {
          "type": "string",
          "format": "int64",
          "title": "Unix milli timestamp of when the plugin was started"
        },
        "stopped_at": {
          "type": "string",
          "format": "int64",
          "title": "Unix milli timestamp of when the plugin was stopped or killed. Value is 0 if it's not stopped or killed"
        },
        "version": {
          "type": "string",
          "title": "The version number of the plugin, specified in the plugin"
        }
      }
    },
    "fmtrpcPluginsList": {
      "type": "object",
      "properties": {
        "plugins": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/fmtrpcPlugin"
          },
          "title": "List of all currently registered plugins"
        }
      }
    },
    "fmtrpcVersionNumber": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string"
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
